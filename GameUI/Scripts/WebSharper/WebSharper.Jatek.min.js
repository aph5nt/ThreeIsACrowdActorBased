(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;$.Define($$,{WebSharper:{Jatek:{Artefact:$.Class({},{New:function(){return $.New(this,{});}}),Container:$.Class({get_Artefacts:function(){return this.artefacts;},get_Height:function(){return f.Create(this.height);},get_Visual:function(){var u,z,A,B,D,E,F,H;u=g.Const(function(v){return function(w){return function(x){return function(y){return"position: absolute; width: "+$$.String(v)+"px; height: "+$$.String(w)+"px; background-color: lightgray; left: "+$$.String(x)+"px; top: "+$$.String(y)+"px";};};};});z=this.get_Width().get_View();A=g.Apply(g.Apply(g.Apply(g.Apply(u,z),this.get_Height().get_View()),this.get_X().get_View()),this.get_Y().get_View());B=function(C){return C.get_Visual();};E=this.get_Artefacts();D=i.Concat(j.map(B,E));F=function(G){return i.Element("div",j.ofArray([k.Create("style",G)]),j.ofArray([D]));};H=i.EmbedView(l.Map(F,A));return H;},get_Width:function(){return f.Create(this.width);},get_X:function(){return f.Create(this.x);},get_Y:function(){return f.Create(this.y);}},{New:function(I,J,K,L,M){var N;N=$.New(this,c.New());N.x=I;N.y=J;N.width=K;N.height=L;N.artefacts=M;return N;}}),ContainerModule:{Create:function(O,P,Q,R,S){return b.New(O,P,Q,R,S);}},Game:$.Class({Start:function(){var T,U,V,W;T=m.Get(this.get_GameState());if(T.$==1){T.$0[0];T.$0[1];U=null;}else{V=T.$0;W=n.New();o.Start(p.frameRefresh(V),{$:1,$0:W});U=m.Set(this.get_GameState(),{$:1,$0:[V,W]});}return U;},Stop:function(){var X,Y,Z,_0;X=m.Get(this.get_GameState());if(X.$==1){Z=X.$0[0];_0=X.$0[1];_0.Cancel();Y=m.Set(this.get_GameState(),{$:0,$0:Z});}else{X.$0;Y=null;}return Y;},get_CurrentScene:function(){return f.Create(this.startScene);},get_GameState:function(){return f.Create({$:0,$0:this.gameLoop});},get_Height:function(){return this.height;},get_Scenes:function(){return this.scenes;},get_Visual:function(){var _1,_2,_3,_4;_1=this.get_Width();_2=this.get_Height();_3="position: relative; width: "+$$.String(_1)+"px; height: "+$$.String(_2)+"px; background-color: lightgray";_4=this.get_Scenes().get_Item(m.Get(this.get_CurrentScene()));return i.Element("div",j.ofArray([k.Create("style",_3)]),j.ofArray([_4.get_Visual()]));},get_Width:function(){return this.width;}},{New:function(_5,_6,_7,_8,_9){var _;_=$.New(this,{});_.width=_5;_.height=_6;_.gameLoop=_7;_.scenes=_8;_.startScene=_9;return _;}}),GameInternals:{frameRefresh:function(ba){return o.Delay(function(){return o.Bind(o.Sleep(1000),function(){ba(0);return p.frameRefresh(ba);});});}},GameModule:{Create:function(bc,bd,be,bf,bg){return q.New(bc,bd,be,bf,bg);}},Scene:$.Class({get_Artefacts:function(){return this.artefacts;},get_Visual:function(){var bh,bj,bk,bl,bm;bh=function(bi){return bi.get_Visual();};bk=this.get_Artefacts();bj=i.Concat(j.map(bh,bk));bl=j.ofArray([bj]);bm=i.Element("div",[],bl);return bm;}},{New:function(bn){var bo;bo=$.New(this,{});bo.artefacts=bn;return bo;}}),SceneModule:{Create:function(bp){return r.New(bp);}},Visual:$.Class({get_Height:function(){return f.Create(this.height);},get_SourceUrl:function(){return this.sourceUrl;},get_Visual:function(){var bq,bv,bw,bx,bz=this,bA;bq=g.Const(function(br){return function(bs){return function(bt){return function(bu){return"position: absolute; width: "+$$.String(br)+"px; height: "+$$.String(bs)+"px; background-color: lightgray; left: "+$$.String(bt)+"px; top: "+$$.String(bu)+"px";};};};});bv=this.get_Width().get_View();bw=g.Apply(g.Apply(g.Apply(g.Apply(bq,bv),this.get_Height().get_View()),this.get_X().get_View()),this.get_Y().get_View());bx=function(by){return i.Element("div",j.ofArray([k.Create("style",by)]),j.ofArray([i.Element("img",j.ofArray([k.Create("src",bz.get_SourceUrl())]),$.New(t,{$:0}))]));};bA=i.EmbedView(l.Map(bx,bw));return bA;},get_Width:function(){return f.Create(this.width);},get_X:function(){return f.Create(this.x);},get_Y:function(){return f.Create(this.y);}},{New:function(bB,bC,bD,bE,bF){var bG;bG=$.New(this,c.New());bG.sourceUrl=bB;bG.x=bC;bG.y=bD;bG.width=bE;bG.height=bF;return bG;}}),VisualModule:{Create:function(bH,bI,bJ,bK,bL){return s.New(bH,bI,bJ,bK,bL);}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Jatek);b=$.Safe(a.Container);c=$.Safe(a.Artefact);d=$.Safe($$.WebSharper.UI);e=$.Safe(d.Next);f=$.Safe(e.Var);g=$.Safe(e.View1);h=$.Safe(e.Client);i=$.Safe(h.Doc);j=$.Safe($$.WebSharper.List);k=$.Safe(h.AttrProxy);l=$.Safe(e.View);m=$.Safe(e.Var1);n=$.Safe($$.WebSharper.CancellationTokenSource);o=$.Safe($$.WebSharper.Concurrency);p=$.Safe(a.GameInternals);q=$.Safe(a.Game);r=$.Safe(a.Scene);s=$.Safe(a.Visual);return t=$.Safe(j.T);});$.OnLoad(function(){$.Inherit(b,c);$.Inherit(s,c);return;});}());
