(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq;$.Define($$,{WebSharper:{UI:{Next:{Abbrev:{Async:{Schedule:function(br){return a.Start(a.Delay(function(){return a.Return(br(null));}),{$:0});},StartTo:function(bs,bt){return a.StartWithContinuations(bs,bt,function(){},function(){},{$:0});}},Dict:{ToKeyArray:function(bw){var bx;bx=b(bw.count);c.iteri(function(by){return function(bz){return d.set(bx,by,bz.K);};},bw);return bx;},ToValueArray:function(bA){var bB;bB=b(bA.count);c.iteri(function(bC){return function(bD){return d.set(bB,bC,bD.V);};},bA);return bB;}},Fresh:{Id:function(){var bE;bE=h.counter()+1;h.counter=function(){return bE;};return"uid"+$$.String(h.counter());},Int:function(){var bF;bF=h.counter()+1;h.counter=function(){return bF;};return h.counter();},counter:$.Field(function(){return 0;})},HashSet:{Except:function(bG,bH){var bI;bI=j.New(k.ToArray(bH));bI.ExceptWith(k.ToArray(bG));return bI;},Filter:function(bJ,bK){return j.New(d.filter(bJ,k.ToArray(bK)));},Intersect:function(bL,bM){var bN;bN=j.New(k.ToArray(bL));bN.IntersectWith(k.ToArray(bM));return bN;},ToArray:function(bO){var bP;bP=b(bO.get_Count());bO.CopyTo(bP);return bP;}},JQueue:{Add:function($x,$q){var $0=this,$this=this;return $q.push($x);},Count:function(bQ){return bQ.length;},Dequeue:function($q){var $0=this,$this=this;return $q.shift();},Iter:function(bR,bS){return d.iter(bR,l.ToArray(bS));},ToArray:function(bT){return bT.slice();}},Mailbox:{StartProcessor:function(bU){var bV,bW,bX;bV=[];bW=[false];bX=a.Delay(function(){return a.Combine(a.While(function(){return l.Count(bV)>0;},a.Delay(function(){return a.Bind(bU(l.Dequeue(bV)),function(){return a.Return(null);});})),a.Delay(function(){return a.Return(void(bW[0]=false));}));});return function(b3){l.Add(b3,bV);if(!bW[0]){bW[0]=true;return a.Start(bX,{$:0});}else{return null;}};}},Slot:$.Class({},{Create:function(b4,b5){return m.New(b4,b5);}}),Slot1:$.Class({Equals:function(b6){return n.Equals(this.key.call(null,this.value),this.key.call(null,b6.get_Value()));},GetHashCode:function(){return n.Hash(this.key.call(null,this.value));},get_Value:function(){return this.value;}},{New:function(b7,b8){var b9;b9=$.New(this,{});b9.key=b7;b9.value=b8;return b9;}}),U:function(){return;}},An:$.Class({},{Append:function(b_,b$){return $.New(o,{$:0,$0:p.Append(b_.$0,b$.$0)});},Concat:function(ca){return $.New(o,{$:0,$0:p.Concat(c.map(function(cb){return q.List(cb);},ca))});},Const:function(cc){return q.Const(cc);},Delayed:function(cd,ce,cf,cg,ch,ci){return{Compute:function(cj){return cj<=cg?ch:cd.Interpolate(ce.TransformTime.call(null,(cj-cg)/cf),ch,ci);},Duration:cf+cg};},Map:function(ck,cl){var cm;cm=cl.Compute;return q.Def(cl.Duration,function(cn){return ck(cm(cn));});},Pack:function(co){return $.New(o,{$:0,$0:p.Single({$:1,$0:co})});},Play:function(cp){return a.Delay(function(){return a.Bind(o.Run(function(){},q.Actions(cp)),function(){return a.Return(q.Finalize(cp));});});},Run:function(ct,cu){var cv;cv=cu.Duration;return a.FromContinuations(function(cw){var cx,cy;cx=cw[0];cy=function(cz,cA){var cB;cB=cA-cz;ct(cu.Compute.call(null,cB));return cB<=cv?void r(function(cC){return cy(cz,cC);}):cx(null);};r(function(cD){return cy(cD,cD);});return;});},Simple:function(cE,cF,cG,cH,cI){return{Compute:function(cJ){return cE.Interpolate(cF.TransformTime.call(null,cJ/cG),cH,cI);},Duration:cG};},WhenDone:function(cK,cL){return o.Append($.New(o,{$:0,$0:p.Single({$:0,$0:cK})}),cL);},get_Empty:function(){return $.New(o,{$:0,$0:p.Empty()});}}),Anims:{Actions:function(cM){return q.ConcatActions(d.choose(function(cN){return cN.$==1?{$:1,$0:cN.$0}:{$:0};},p.ToArray(cM.$0)));},ConcatActions:function(cO){var cP,cQ,cR,cT;cP=c.toArray(cO);cQ=d.length(cP);if(cQ===0){return q.Const(null);}else{if(cQ===1){return d.get(cP,0);}else{cR=c.max(c.map(function(cS){return cS.Duration;},cP));cT=d.map(function(cU){return q.Prolong(cR,cU);},cP);return q.Def(cR,function(cV){return d.iter(function(cW){return cW.Compute.call(null,cV);},cT);});}}},Const:function(cX){return q.Def(0,function(){return cX;});},Def:function(cZ,c0){return{Compute:c0,Duration:cZ};},Finalize:function(c1){return d.iter(function(c2){return c2.$==0?c2.$0.call(null,null):null;},p.ToArray(c1.$0));},List:function(c3){return c3.$0;},Prolong:function(c4,c5){var c6,c7,c8;c6=c5.Compute;c7=c5.Duration;c8=s.Create(function(){return c5.Compute.call(null,c5.Duration);});return{Compute:function(c_){return c_>=c7?c8.eval():c6(c_);},Duration:c4};}},AppendList1:{Append:function(c$,da){var db;db=[c$,da];return db[0].$==0?db[1]:db[1].$==0?db[0]:{$:2,$0:c$,$1:da};},Concat:function(dc){var dd;dd=c.toArray(dc);return t.MapReduce(function(de){return de;},p.Empty(),function(df){return function(dg){return p.Append(df,dg);};},dd);},Empty:function(){return{$:0};},FromArray:function(dh){var di;di=dh.length;return di===0?{$:0}:di===1?{$:1,$0:d.get(dh,0)}:{$:3,$0:dh.slice()};},Single:function(dj){return{$:1,$0:dj};},ToArray:function(dk){var dl,dm;dl=[];dm=function(dn){var _do;if(dn.$==1){return l.Add(dn.$0,dl);}else{if(dn.$==2){_do=dn.$1;dm(dn.$0);return dm(_do);}else{return dn.$==3?d.iter(function(dp){return l.Add(dp,dl);},dn.$0):null;}}};dm(dk);return l.ToArray(dl);}},Array:{MapReduce:function(dq,dr,ds,dt){var du;du=function(dv,dw){var dx,dy,dz,dA,dB,dC;if(dw<=0){return dr;}else{if(dw===1){if(dv>=0?dv<d.length(dt):false){return dq(d.get(dt,dv));}else{dx=dw/2>>0;dy=du(dv,dx);dz=du(dv+dx,dw-dx);return(ds(dy))(dz);}}else{dA=dw/2>>0;dB=du(dv,dA);dC=du(dv+dA,dw-dA);return(ds(dB))(dC);}}};return du(0,d.length(dt));}},Client:{AnimatedAttrNode:$.Class({GetChangeAnim:function(dD){var dE,dG=this;dE=[this.visible,this.logical];return o.WhenDone(function(){return dG.sync(dD);},dE[0].$==1?dE[1].$==1?dG.dirty?o.Pack(o.Map(function(dH){return dG.pushVisible(dD,dH);},u.AnimateChange(dG.tr,dE[0].$0,dE[1].$0))):o.get_Empty():o.get_Empty():o.get_Empty());},GetEnterAnim:function(dI){var dJ,dL=this;dJ=[this.visible,this.logical];return o.WhenDone(function(){return dL.sync(dI);},dJ[0].$==1?dJ[1].$==1?dL.dirty?o.Pack(o.Map(function(dM){return dL.pushVisible(dI,dM);},u.AnimateChange(dL.tr,dJ[0].$0,dJ[1].$0))):dJ[0].$==0?dJ[1].$==1?o.Pack(o.Map(function(dN){return dL.pushVisible(dI,dN);},u.AnimateEnter(dL.tr,dJ[1].$0))):o.get_Empty():o.get_Empty():dJ[0].$==0?dJ[1].$==1?o.Pack(o.Map(function(dO){return dL.pushVisible(dI,dO);},u.AnimateEnter(dL.tr,dJ[1].$0))):o.get_Empty():o.get_Empty():dJ[0].$==0?dJ[1].$==1?o.Pack(o.Map(function(dP){return dL.pushVisible(dI,dP);},u.AnimateEnter(dL.tr,dJ[1].$0))):o.get_Empty():o.get_Empty());},GetExitAnim:function(dQ){var dR,dT=this;dR=this.visible;return o.WhenDone(function(){dT.dirty=true;dT.visible={$:0};return;},dR.$==1?o.Pack(o.Map(function(dU){return dT.pushVisible(dQ,dU);},u.AnimateExit(dT.tr,dR.$0))):o.get_Empty());},Init:function(){return null;},Sync:function(){return null;},get_Changed:function(){return this.updates;},pushVisible:function(dX,dY){this.visible={$:1,$0:dY};this.dirty=true;return(this.push.call(null,dX))(dY);},sync:function(dZ){if(this.dirty){v.iter(this.push.call(null,dZ),this.logical);this.visible=this.logical;this.dirty=false;return;}else{return null;}}},{New:function(d0,d1,d2){var d3;d3=$.New(this,{});d3.tr=d0;d3.push=d2;d3.logical={$:0};d3.visible={$:0};d3.dirty=true;d3.updates=w.Map(function(d4){d3.logical={$:1,$0:d4};d3.dirty=true;return;},d1);return d3;}}),Attr:{Animated:function(d5,d6,d7,d8){return y.Animated(d6,d7,function(d9){return function(d_){return z.SetAttr(d9,d5,d8(d_));};});},AnimatedStyle:function(d$,ea,eb,ec){return y.Animated(ea,eb,function(ed){return function(ee){return z.SetStyle(ed,d$,ec(ee));};});},Class:function(ef){return y.Static(function(eg){return z.AddClass(eg,ef);});},ContentEditableHtml:function(eh){var ei;ei=A.CustomVar(eh,function(ej){return function(ek){ej.innerHTML=ek;};},function(el){return{$:1,$0:el.innerHTML};});return B.Append(B.Create("contenteditable","true"),ei);},ContentEditableText:function(em){var en;en=A.CustomVar(em,function(eo){return function(ep){eo.textContent=ep;};},function(eq){return{$:1,$0:eq.textContent};});return B.Append(B.Create("contenteditable","true"),en);},CustomValue:function(er,es,et){return A.CustomVar(er,function(eu){return function(ev){eu.value=es(ev);};},function(ew){return et(ew.value);});},CustomVar:function(ex,ey,ez){var eA,eF;eA=function(eB){return function(){return ex.UpdateMaybe(function(eD){var eE;eE=ez(eB);return eE.$==1?!n.Equals(eE.$0,eD)?eE:{$:0}:{$:0};});};};eF=function(eG){return function(eH){var eI;eI=ez(eG);return eI.$==1?n.Equals(eI.$0,eH)?null:(ey(eG))(eH):(ey(eG))(eH);};};return B.Concat(C.ofArray([A.Handler("change",eA),A.Handler("input",eA),A.Handler("keyup",eA),A.DynamicCustom(eF,ex.get_View())]));},Dynamic:function(eJ,eK){return y.Dynamic(eK,function(){},function(eM){return function(eN){return z.SetAttr(eM,eJ,eN);};});},DynamicClass:function(eO,eP,eQ){return y.Dynamic(eP,function(){},function(eS){return function(eT){return eQ(eT)?z.AddClass(eS,eO):z.RemoveClass(eS,eO);};});},DynamicCustom:function(eU,eV){return y.Dynamic(eV,function(){},eU);},DynamicPred:function(eX,eY,eZ){var e0;e0=function(e1){return function(e2){var e3;e3=e2[1];return e2[0]?z.SetAttr(e1,eX,e3):z.RemoveAttr(e1,eX);};};return y.Dynamic(w.Map2(function(e4){return function(e5){return[e4,e5];};},eY,eZ),function(){},e0);},DynamicProp:function(e7,e8){return y.Dynamic(e8,function(){},function(e_){return function(e$){e_[e7]=e$;};});},DynamicStyle:function(fa,fb){return y.Dynamic(fb,function(){},function(fd){return function(fe){return z.SetStyle(fd,fa,fe);};});},Handler:function(ff,fg){return y.Static(function(fh){return fh.addEventListener(ff,fg(fh),false);});},HandlerView:function(fi,fj,fk){var fl;fl=h.Id();return y.Dynamic(fj,function(fm){var fn;fn=fk(fm);return fm.addEventListener(fi,function(fo){return(fn(fo))(fm[fl]);},false);},function(fp){return function(fq){fp[fl]=fq;};});},OnAfterRender:function(fr){return y.Mk(0,{$:4,$0:fr});},Style:function(fs,ft){return y.Static(function(fu){return z.SetStyle(fu,fs,ft);});},ValidateForm:$.Field(function(){return A.OnAfterRender(function(fv){return $$.H5F?$$.H5F.setup(fv):undefined;});}),Value:function(fw){return A.CustomValue(fw,function(fx){return fx;},function(fy){return{$:1,$0:fy};});}},AttrProxy:$.Class({},{Append:function(fz,fA){return y.Mk(fz.Flags|fA.Flags,y.AppendTree(fz.Tree,fA.Tree));},Concat:function(fB){var fC;fC=c.toArray(fB);return t.MapReduce(function(fD){return fD;},B.get_Empty(),function(fE){return function(fF){return B.Append(fE,fF);};},fC);},Create:function(fG,fH){return y.Static(function(fI){return z.SetAttr(fI,fG,fH);});},Handler:function(fJ,fK){return y.Static(function(fL){return fL.addEventListener(fJ,fK(fL),false);});},get_Empty:function(){return y.EmptyAttr();}}),Attrs:{Animated:function(fM,fN,fO){var fP,fQ;fP=D.New(fM,fN,fO);fQ=4;if(u.CanAnimateEnter(fM)){fQ=fQ|1;}if(u.CanAnimateExit(fM)){fQ=fQ|2;}return y.Mk(fQ,{$:1,$0:fP});},AppendTree:function(fR,fS){var fT;fT=[fR,fS];return fT[0].$==0?fT[1]:fT[1].$==0?fT[0]:{$:2,$0:fR,$1:fS};},Dynamic:function(fU,fV,fW){return y.Mk(0,{$:1,$0:E.New(fU,fV,fW)});},EmptyAttr:$.Field(function(){return y.Mk(0,{$:0});}),GetAnim:function(fX,fY){return o.Concat(d.map(function(fZ){return(fY(fZ))(fX.DynElem);},fX.DynNodes));},GetChangeAnim:function(f0){return y.GetAnim(f0,function(f1){return function(f2){return f1.GetChangeAnim(f2);};});},GetEnterAnim:function(f3){return y.GetAnim(f3,function(f4){return function(f5){return f4.GetEnterAnim(f5);};});},GetExitAnim:function(f6){return y.GetAnim(f6,function(f7){return function(f8){return f7.GetExitAnim(f8);};});},HasChangeAnim:function(f9){return(f9.DynFlags&4)!==0;},HasEnterAnim:function(f_){return(f_.DynFlags&1)!==0;},HasExitAnim:function(f$){return(f$.DynFlags&2)!==0;},Insert:function(ga,gb){var gc,gd,ge;gc=[];gd=[];ge=function(gf){var gg,gh;if(gf.$==1){gg=gf.$0;gg.Init(ga);return l.Add(gg,gc);}else{if(gf.$==2){gh=gf.$1;ge(gf.$0);return ge(gh);}else{return gf.$==3?gf.$0.call(null,ga):gf.$==4?l.Add(gf.$0,gd):null;}}};ge(gb.Tree);return $.DeleteEmptyFields({DynElem:ga,DynFlags:gb.Flags,DynNodes:l.ToArray(gc),OnAfterRender:(l.Count(gd)===0?{$:0}:{$:1,$0:function(gi){return l.Iter(function(gj){return gj(gi);},gd);}}).$0},["OnAfterRender"]);},Mk:function(gk,gl){return $.New(B,{Flags:gk,Tree:gl});},Static:function(gm){return y.Mk(0,{$:3,$0:gm});},Sync:function(gn,go){return d.iter(function(gp){return gp.Sync(gn);},go.DynNodes);},Updates:function(gq){var gr,gw;gr=function(gs){return function(gt){return w.Map2(function(){return function(){return null;};},gs,gt);};};gw=gq.DynNodes;return t.MapReduce(function(gx){return gx.get_Changed();},F.Const(null),gr,gw);}},CheckedInput:$.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}}),Doc:$.Class({ReplaceInDom:function(gy){var gz;gz=G.createTextNode("");gy.parentNode.replaceChild(gz,gy);return H.RunBefore(gz,this);},get_DocNode:function(){return this.docNode;},get_Updates:function(){return this.updates;}},{Append:function(gA,gB){var gC;gC=w.Map2(function(){return function(){return null;};},gA.get_Updates(),gB.get_Updates());return H.Mk({$:0,$0:gA.get_DocNode(),$1:gB.get_DocNode()},gC);},BindView:function(gF,gG){return H.EmbedView(w.Map(gF,gG));},Button:function(gH,gI,gJ){var gK;gK=B.Concat(gI);return I.New1(H.Clickable("button",gJ),gK,H.TextNode(gH));},ButtonView:function(gL,gM,gN,gO){var gP;gP=B.Concat(c.append([A.HandlerView("click",gN,function(){return function(){return gO;};})],gM));return I.New1(z.CreateElement("button"),gP,H.TextNode(gL));},CheckBox:function(gS,gT){var gU;gU=z.CreateElement("input");gU.addEventListener("click",function(){return gT.Set(gU.checked);},false);return I.New1(gU,B.Concat(c.toList(c.delay(function(){return c.append(gS,c.delay(function(){return c.append([B.Create("type","checkbox")],c.delay(function(){return[A.DynamicProp("checked",gT.get_View())];}));}));}))),H.get_Empty());},CheckBoxGroup:function(gZ,g0,g1){var g2,g3,g5,g7,g8;g2=g1.get_View();g3=function(g4){return n.Equals(g4,g0);};g5=w.Map(function(g6){return c.exists(g3,g6);},g2);g7=B.Concat(C.append(C.ofArray([B.Create("type","checkbox"),B.Create("name",g1.get_Id()),B.Create("value",h.Id()),A.DynamicProp("checked",g5)]),C.ofSeq(gZ)));g8=z.CreateElement("input");g8.addEventListener("click",function(){var g_;g_=g8.checked;return g1.Update(function(g$){return c.toList(J.distinct(g_?C.append(g$,C.ofArray([g0])):C.filter(function(ha){return!n.Equals(ha,g0);},g$)));});},false);return I.New1(g8,g7,H.get_Empty());},Clickable:function(hb,hc){var hd;hd=z.CreateElement(hb);hd.addEventListener("click",function(he){he.preventDefault();return hc(null);},false);return hd;},Concat:function(hf){var hg;hg=c.toArray(hf);return t.MapReduce(function(hh){return hh;},H.get_Empty(),function(hi){return function(hj){return H.Append(hi,hj);};},hg);},Convert:function(hk,hl){return H.Flatten(w.Convert(hk,hl));},ConvertBy:function(hm,hn,ho){return H.Flatten(w.ConvertBy(hm,hn,ho));},ConvertSeq:function(hp,hq){return H.Flatten(w.ConvertSeq(hp,hq));},ConvertSeqBy:function(hr,hs,ht){return H.Flatten(w.ConvertSeqBy(hr,hs,ht));},Element:function(hu,hv,hw){var hx,hy;hx=B.Concat(hv);hy=H.Concat(hw);return I.New1(z.CreateElement(hu),hx,hy);},EmbedView:function(hz){var hA,hB;hA=K.CreateEmbedNode();hB=w.Map(function(){},F.Bind(function(hD){K.UpdateEmbedNode(hA,hD.get_DocNode());return hD.get_Updates();},hz));return H.Mk({$:2,$0:hA},hB);},Flatten:function(hE){return H.EmbedView(w.Map(function(hF){return H.Concat(hF);},hE));},FloatInput:function(hG,hH){return H.InputInternal("input",function(hI){return c.append(hG,[A.CustomValue(hH,function(hJ){return hJ.get_Input();},function(hK){var hL,hM;if(L.isBlank(hK)){hL=(hI.checkValidity?hI.checkValidity():true)?$.New(M,{$:2,$0:hK}):$.New(M,{$:1,$0:hK});}else{hM=+hK;hL=$$.isNaN(hM)?$.New(M,{$:1,$0:hK}):$.New(M,{$:0,$0:hM,$1:hK});}return{$:1,$0:hL};}),B.Create("type","number")]);});},FloatInputUnchecked:function(hN,hO){var hP;hP=function(hQ){var hR;if(L.isBlank(hQ)){return{$:1,$0:0};}else{hR=+hQ;return $$.isNaN(hR)?{$:0}:{$:1,$0:hR};}};return H.InputInternal("input",function(){return c.append(hN,[hO.Get()===0?B.Create("value","0"):B.get_Empty(),A.CustomValue(hO,function(hT){return $$.String(hT);},hP),B.Create("type","number")]);});},Input:function(hU,hV){return H.InputInternal("input",function(){return c.append(hU,[A.Value(hV)]);});},InputArea:function(hX,hY){return H.InputInternal("textarea",function(){return c.append(hX,[A.Value(hY)]);});},InputInternal:function(h0,h1){var h2;h2=z.CreateElement(h0);return I.New1(h2,B.Concat(h1(h2)),H.get_Empty());},IntInput:function(h3,h4){return H.InputInternal("input",function(h5){return c.append(h3,[A.CustomValue(h4,function(h6){return h6.get_Input();},function(h7){var h8,h9;if(L.isBlank(h7)){h8=(h5.checkValidity?h5.checkValidity():true)?$.New(M,{$:2,$0:h7}):$.New(M,{$:1,$0:h7});}else{h9=+h7;h8=$$.isNaN(h9)?$.New(M,{$:1,$0:h7}):$.New(M,{$:0,$0:h9,$1:h7});}return{$:1,$0:h8};}),B.Create("type","number"),B.Create("step","1")]);});},IntInputUnchecked:function(h_,h$){var ia;ia=function(ib){var ic;if(L.isBlank(ib)){return{$:1,$0:0};}else{ic=+ib;return ic!==ic>>0?{$:0}:{$:1,$0:ic};}};return H.InputInternal("input",function(){return c.append(h_,[h$.Get()===0?B.Create("value","0"):B.get_Empty(),A.CustomValue(h$,function(ie){return $$.String(ie);},ia),B.Create("type","number"),B.Create("step","1")]);});},Link:function(_if,ig,ih){var ii,ij;ii=B.Concat(ig);ij=B.Append(B.Create("href","#"),ii);return I.New1(H.Clickable("a",ih),ij,H.TextNode(_if));},LinkView:function(ik,il,im,_in){var io;io=B.Concat(c.append([A.HandlerView("click",im,function(){return function(){return _in;};}),B.Create("href","#")],il));return I.New1(z.CreateElement("a"),io,H.TextNode(ik));},Mk:function(ir,is){return H.New(ir,is);},New:function(it,iu){var iv;iv=$.New(this,{});iv.docNode=it;iv.updates=iu;return iv;},PasswordBox:function(iw,ix){return H.InputInternal("input",function(){return c.append(iw,[A.Value(ix),B.Create("type","password")]);});},Radio:function(iz,iA,iB){var iC,iE,iG;iC=z.CreateElement("input");iC.addEventListener("click",function(){return iB.Set(iA);},false);iE=A.DynamicProp("checked",w.Map(function(iF){return n.Equals(iF,iA);},iB.get_View()));iG=function(iH,iI){return B.Create(iH,iI);};return I.New1(iC,B.Concat(C.append(C.ofArray([iG("type","radio"),iG("name",iB.get_Id()),iE]),C.ofSeq(iz))),H.get_Empty());},Run:function(iJ,iK){var iL,iM;iL=iK.get_DocNode();K.LinkElement(iJ,iL);iM=K.CreateRunState(iJ,iL);return F.Sink(N.StartProcessor(function(){return K.PerformAnimatedUpdate(iM,iL);}),iK.get_Updates());},RunAfter:function(iO,iP){var iQ;iQ=G.createTextNode("");iO.parentNode.insertBefore(iQ,iO.nextSibling);return H.RunBetween(iO,iQ,iP);},RunAfterById:function(iR,iS){var iT;iT=z.Doc().getElementById(iR);return n.Equals(iT,null)?O.FailWith("invalid id: "+iR):H.RunAfter(iT,iS);},RunAppend:function(iU,iV){var iW;iW=G.createTextNode("");iU.appendChild(iW);return H.RunBefore(iW,iV);},RunAppendById:function(iX,iY){var iZ;iZ=z.Doc().getElementById(iX);return n.Equals(iZ,null)?O.FailWith("invalid id: "+iX):H.RunAppend(iZ,iY);},RunBefore:function(i0,i1){var i2;i2=G.createTextNode("");i0.parentNode.insertBefore(i2,i0);return H.RunBetween(i2,i0,i1);},RunBeforeById:function(i3,i4){var i5;i5=z.Doc().getElementById(i3);return n.Equals(i5,null)?O.FailWith("invalid id: "+i3):H.RunBefore(i5,i4);},RunBetween:function(i6,i7,i8){var i9;K.LinkPrevElement(i7,i8.get_DocNode());i9=K.CreateDelimitedRunState(i6,i7,i8.get_DocNode());return F.Sink(N.StartProcessor(function(){return K.PerformAnimatedUpdate(i9,i8.get_DocNode());}),i8.get_Updates());},RunById:function(i$,ja){var jb;jb=z.Doc().getElementById(i$);return n.Equals(jb,null)?O.FailWith("invalid id: "+i$):H.Run(jb,ja);},RunPrepend:function(jc,jd){var je;je=G.createTextNode("");jc.insertBefore(je,jc.firstChild);return H.RunBefore(je,jd);},RunPrependById:function(jf,jg){var jh;jh=z.Doc().getElementById(jf);return n.Equals(jh,null)?O.FailWith("invalid id: "+jf):H.RunPrepend(jh,jg);},Select:function(ji,jj,jk,jl){return H.SelectDyn(ji,jj,F.Const(jk),jl);},SelectDyn:function(jm,jn,jo,jp){var jq,jr,jv,jw,jx,jB;jq=[$.New(P,{$:0})];jr=function(js){return function(jt){js.selectedIndex=c.findIndex(function(ju){return n.Equals(jt,ju);},jq[0]);};};jv=z.CreateElement("select");jw=jp.get_View();jx=A.DynamicCustom(jr,jw);jv.addEventListener("change",function(){return jp.UpdateMaybe(function(jz){var jA;jA=jq[0].get_Item(jv.selectedIndex);return n.Equals(jz,jA)?{$:0}:{$:1,$0:jA};});},false);jB=H.Convert(function(jC){var jD,jE;jD=jC[0];jE=H.TextNode(jn(jC[1]));return H.Element("option",C.ofArray([B.Create("value",$$.String(jD))]),C.ofArray([jE]));},w.Map(function(jF){jq[0]=jF;return c.mapi(function(jG){return function(jH){return[jG,jH];};},jF);},jo));return I.New1(jv,B.Append(jx,B.Concat(jm)),jB);},SelectDynOptional:function(jI,jJ,jK,jL,jM){return H.SelectDyn(jI,function(jN){return jN.$==1?jK(jN.$0):jJ;},w.Map(function(jO){return $.New(P,{$:1,$0:{$:0},$1:C.map(function(jP){return{$:1,$0:jP};},jO)});},jL),jM);},SelectOptional:function(jQ,jR,jS,jT,jU){return H.Select(jQ,function(jV){return jV.$==1?jS(jV.$0):jR;},$.New(P,{$:1,$0:{$:0},$1:C.map(function(jW){return{$:1,$0:jW};},jT)}),jU);},Static:function(jX){return I.New1(jX,B.get_Empty(),H.get_Empty());},SvgElement:function(jY,jZ,j0){var j1,j2;j1=B.Concat(jZ);j2=H.Concat(j0);return I.New1(z.CreateSvgElement(jY),j1,j2);},TextNode:function(j3){return H.Mk({$:5,$0:z.CreateText(j3)},F.Const(null));},TextView:function(j4){var j5,j6;j5=K.CreateTextNode();j6=w.Map(function(j7){return K.UpdateTextNode(j5,j7);},j4);return H.Mk({$:4,$0:j5},j6);},Verbatim:function(j8){var j9,j_,j$;j9=Q.parseHTML(j8);j_=n.Equals(j9,null)?[]:j9;j$=function(ka){return function(kb){return{$:0,$0:ka,$1:kb};};};return H.Mk(t.MapReduce(function(kc){return{$:1,$0:K.CreateElemNode(kc,B.get_Empty(),{$:3})};},{$:3},j$,j_),F.Const(null));},get_Empty:function(){return H.Mk({$:3},F.Const(null));}}),DocElemNode:$.Class({Equals:function(kd){return this.ElKey===kd.ElKey;},GetHashCode:function(){return this.ElKey;}}),Docs:{ComputeChangeAnim:function(ke,kf){var kg,ki;kg=function(kh){return y.HasChangeAnim(kh.Attr);};ki=function(kj){return R.Filter(kg,kj);};return o.Concat(d.map(function(kk){return y.GetChangeAnim(kk.Attr);},R.ToArray(R.Intersect(ki(ke.PreviousNodes),ki(kf)))));},ComputeEnterAnim:function(kl,km){return o.Concat(d.map(function(kn){return y.GetEnterAnim(kn.Attr);},R.ToArray(R.Except(kl.PreviousNodes,R.Filter(function(ko){return y.HasEnterAnim(ko.Attr);},km)))));},ComputeExitAnim:function(kp,kq){return o.Concat(d.map(function(kr){return y.GetExitAnim(kr.Attr);},R.ToArray(R.Except(kq,R.Filter(function(ks){return y.HasExitAnim(ks.Attr);},kp.PreviousNodes)))));},CreateDelimitedElemNode:function(kt,ku,kv,kw){var kx,ky;kx=kt.parentNode;K.LinkPrevElement(ku,kw);ky=y.Insert(kx,kv);return $.New(S,$.DeleteEmptyFields({Attr:ky,Children:kw,Delimiters:[kt,ku],El:kx,ElKey:h.Int(),Render:$.GetOptional(ky.OnAfterRender).$0},["Render"]));},CreateDelimitedRunState:function(kz,kA,kB){return{PreviousNodes:R.get_Empty(),Top:K.CreateDelimitedElemNode(kz,kA,B.get_Empty(),kB)};},CreateElemNode:function(kC,kD,kE){var kF;K.LinkElement(kC,kE);kF=y.Insert(kC,kD);return $.New(S,$.DeleteEmptyFields({Attr:kF,Children:kE,El:kC,ElKey:h.Int(),Render:$.GetOptional(kF.OnAfterRender).$0},["Render"]));},CreateEmbedNode:function(){return{Current:{$:3},Dirty:false};},CreateRunState:function(kG,kH){return{PreviousNodes:R.get_Empty(),Top:K.CreateElemNode(kG,B.get_Empty(),kH)};},CreateTextNode:function(){return{Text:z.CreateText(""),Dirty:false,Value:""};},DoSyncElement:function(kI){var kJ,kK,kO,kQ;kJ=kI.El;kK=function(kL,kM){var kN;if(kL.$==1){return{$:1,$0:kL.$0.El};}else{if(kL.$==2){kN=kL.$0;if(kN.Dirty){kN.Dirty=false;return K.InsertDoc(kJ,kN.Current,kM);}else{return kK(kN.Current,kM);}}else{return kL.$==3?kM:kL.$==4?{$:1,$0:kL.$0.Text}:kL.$==5?{$:1,$0:kL.$0}:kK(kL.$0,kK(kL.$1,kM));}}};kO=kI.El;T.Iter(function(kP){return z.RemoveNode(kO,kP);},T.Except(T.DocChildren(kI),T.Children(kI.El,$.GetOptional(kI.Delimiters))));kQ=$.GetOptional(kI.Delimiters);kK(kI.Children,kQ.$==1?{$:1,$0:kQ.$0[1]}:{$:0});return;},DomNodes:$.Class({},{Children:function(kR,kS){var kT,kU,kV,kW,kX;if(kS.$==1){kT=kS.$0[1];kU=kS.$0[0];kV=b.prototype.constructor.apply(b,[]);kW=kU.nextSibling;while(kW!==kT){kV.push(kW);kW=kW.nextSibling;}return $.New(T,{$:0,$0:kV});}else{kX=kR.childNodes;return $.New(T,{$:0,$0:d.init(kR.childNodes.length,function(kY){return kX[kY];})});}},DocChildren:function(kZ){var k0,k1;k0=[];k1=function(k2){var k3;if(k2.$==2){return k1(k2.$0.Current);}else{if(k2.$==1){return l.Add(k2.$0.El,k0);}else{if(k2.$==3){return null;}else{if(k2.$==5){return null;}else{if(k2.$==4){return l.Add(k2.$0.Text,k0);}else{k3=k2.$1;k1(k2.$0);return k1(k3);}}}}}};k1(kZ.Children);return $.New(T,{$:0,$0:l.ToArray(k0)});},Except:function(k4,k5){var k6;k6=k4.$0;return $.New(T,{$:0,$0:d.filter(function(k7){return c.forall(function(k8){return!(k7===k8);},k6);},k5.$0)});},FoldBack:function(k9,k_,k$){return d.foldBack(k9,k_.$0,k$);},Iter:function(la,lb){return d.iter(la,lb.$0);}}),InsertDoc:function(lc,ld,le){var lf;if(ld.$==1){return K.InsertNode(lc,ld.$0.El,le);}else{if(ld.$==2){lf=ld.$0;lf.Dirty=false;return K.InsertDoc(lc,lf.Current,le);}else{return ld.$==3?le:ld.$==4?K.InsertNode(lc,ld.$0.Text,le):ld.$==5?K.InsertNode(lc,ld.$0,le):K.InsertDoc(lc,ld.$0,K.InsertDoc(lc,ld.$1,le));}}},InsertNode:function(lg,lh,li){z.InsertAt(lg,li,lh);return{$:1,$0:lh};},LinkElement:function(lj,lk){K.InsertDoc(lj,lk,{$:0});},LinkPrevElement:function(ll,lm){K.InsertDoc(ll.parentNode,lm,{$:1,$0:ll});},NodeSet:$.Class({},{Except:function(ln,lo){return $.New(R,{$:0,$0:k.Except(ln.$0,lo.$0)});},Filter:function(lp,lq){return $.New(R,{$:0,$0:k.Filter(lp,lq.$0)});},FindAll:function(lr){var ls,lt;ls=[];lt=function(lu){var lv,lw;if(lu.$==0){lv=lu.$1;lt(lu.$0);return lt(lv);}else{if(lu.$==1){lw=lu.$0;l.Add(lw,ls);return lt(lw.Children);}else{return lu.$==2?lt(lu.$0.Current):null;}}};lt(lr);return $.New(R,{$:0,$0:j.New(l.ToArray(ls))});},Intersect:function(lx,ly){return $.New(R,{$:0,$0:k.Intersect(lx.$0,ly.$0)});},IsEmpty:function(lz){return lz.$0.get_Count()===0;},ToArray:function(lA){return k.ToArray(lA.$0);},get_Empty:function(){return $.New(R,{$:0,$0:j.New11()});}}),PerformAnimatedUpdate:function(lB,lC){return a.Delay(function(){var lE,lF,lG;lE=R.FindAll(lC);lF=K.ComputeChangeAnim(lB,lE);lG=K.ComputeEnterAnim(lB,lE);return a.Bind(o.Play(o.Append(lF,K.ComputeExitAnim(lB,lE))),function(){K.SyncElemNode(lB.Top);return a.Bind(o.Play(lG),function(){return a.Return(void(lB.PreviousNodes=lE));});});});},Sync:function(lJ){var lK;lK=function(lL){var lM,lN,lO;if(lL.$==1){lM=lL.$0;K.SyncElement(lM);return lK(lM.Children);}else{if(lL.$==2){return lK(lL.$0.Current);}else{if(lL.$==3){return null;}else{if(lL.$==5){return null;}else{if(lL.$==4){lN=lL.$0;if(lN.Dirty){lN.Text.nodeValue=lN.Value;lN.Dirty=false;return;}else{return null;}}else{lO=lL.$1;lK(lL.$0);return lK(lO);}}}}}};return lK(lJ);},SyncElemNode:function(lP){K.SyncElement(lP);return K.Sync(lP.Children);},SyncElement:function(lQ){var lR,lV;y.Sync(lQ.El,lQ.Attr);lR=function(lS){var lT,lU;if(lS.$==0){lT=lS.$1;return lR(lS.$0)?true:lR(lT);}else{if(lS.$==2){lU=lS.$0;return lU.Dirty?true:lR(lU.Current);}else{return false;}}};if(lR(lQ.Children)){K.DoSyncElement(lQ);}lV=$.GetOptional(lQ.Render);if(lV.$==1){lV.$0.call(null,lQ.El);delete lQ.Render;return;}else{return null;}},UpdateEmbedNode:function(lW,lX){lW.Current=lX;lW.Dirty=true;return;},UpdateTextNode:function(lY,lZ){lY.Value=lZ;lY.Dirty=true;return;}},DynamicAttrNode:$.Class({GetChangeAnim:function(){return o.get_Empty();},GetEnterAnim:function(){return o.get_Empty();},GetExitAnim:function(){return o.get_Empty();},Init:function(l3){return this.init.call(null,l3);},Sync:function(l4){if(this.dirty){(this.push.call(null,l4))(this.value);this.dirty=false;return;}else{return null;}},get_Changed:function(){return this.updates;}},{New:function(l5,l6,l7){var l8;l8=$.New(this,{});l8.init=l6;l8.push=l7;l8.value=g.U();l8.dirty=true;l8.updates=w.Map(function(l9){l8.value=l9;l8.dirty=true;return;},l5);return l8;}}),Elt:$.Class({AddClass:function($cls){var $this=this;return $this.elt.className+=" "+$cls;},Append:function(l_){var l$;l$=this.get_DocElemNode();l$.Children={$:0,$0:l$.Children,$1:l_.get_DocNode()};U.Set(this.rvUpdates,w.Map2(function(){return function(){return null;};},U.Get(this.rvUpdates),l_.get_Updates()));K.InsertDoc(this.elt,l_.get_DocNode(),{$:0});return;},Clear:function(){this.get_DocElemNode().Children={$:3};U.Set(this.rvUpdates,F.Const(null));while(this.elt.hasChildNodes()){this.elt.removeChild(this.elt.firstChild);}return;},GetAttribute:function(mc){return this.elt.getAttribute(mc);},GetProperty:function(md){return this.elt[md];},GetText:function(){return this.elt.textContent;},GetValue:function(){return this.elt.value;},HasAttribute:function(me){return this.elt.hasAttribute(me);},HasClass:function(mf){return(new V("(\\s|^)"+mf+"(\\s|$)")).test(this.elt.className);},Html:function(){return this.elt.outerHTML;},Id:function(){return this.elt.id;},OnAfterRender:function(mg){var mh,mi,mj;mh=$.GetOptional(this.get_DocElemNode().Render);if(mh.$==1){mj=mh.$0;mi={$:1,$0:function(mk){mj(mk);return mg(mk);}};}else{mi={$:1,$0:mg};}$.SetOptional(this.get_DocElemNode(),"Render",mi);return this;},Prepend:function(ml){var mm,mp,mq;mm=this.get_DocElemNode();mm.Children={$:0,$0:ml.get_DocNode(),$1:mm.Children};U.Set(this.rvUpdates,w.Map2(function(){return function(){return null;};},U.Get(this.rvUpdates),ml.get_Updates()));mp=this.elt.firstChild;mq=n.Equals(mp,null)?{$:0}:{$:1,$0:mp};K.InsertDoc(this.elt,ml.get_DocNode(),mq);return;},RemoveAttribute:function(mr){return this.elt.removeAttribute(mr);},RemoveClass:function(ms){this.elt.className=this.elt.className.replace(new V("(\\s|^)"+ms+"(\\s|$)")," ");},SetAttribute:function(mt,mu){return this.elt.setAttribute(mt,mu);},SetProperty:function(mv,mw){this.elt[mv]=mw;},SetStyle:function(mx,my){this.elt.style[mx]=my;},SetText:function(mz){this.get_DocElemNode().Children={$:3};U.Set(this.rvUpdates,F.Const(null));this.elt.textContent=mz;return;},SetValue:function(mA){this.elt.value=mA;},get_DocElemNode:function(){var mB;mB=this.docNode1;return mB.$==1?mB.$0:O.FailWith("Elt: Invalid docNode");},get_Element:function(){return this.elt;},on:function(mC,mD){this.elt.addEventListener(mC,mD(this.elt),false);return this;}},{New:function(mE,mF,mG,mH){var mJ;mJ=$.New(this,H.New(mE,mF));mJ.docNode1=mE;mJ.elt=mG;mJ.rvUpdates=mH;return mJ;},New1:function(mK,mL,mM){var mN,mO,mP,mQ,mT;mN=K.CreateElemNode(mK,mL,mM.get_DocNode());mO=W.Create(mM.get_Updates());mP=y.Updates(mN.Attr);mQ=function(){return function(){return null;};};mT=F.Bind(function(mU){return w.Map2(mQ,mP,mU);},mO.get_View());return I.New({$:1,$0:mN},mT,mK,mO,mP);}})},DomUtility:{AddClass:function(mV,mW){Q(mV).addClass(mW);},AppendTo:function(mX,mY){mX.appendChild(mY);},Clear:function(mZ){while(mZ.hasChildNodes()){mZ.removeChild(mZ.firstChild);}return;},ClearAttrs:function(m0){while(m0.hasAttributes()){m0.removeAttributeNode(m0.attributes.item(0));}return;},CreateAttr:function(m1,m2){var m3;m3=z.Doc().createAttribute(m1);m3.value=m2;return m3;},CreateElement:function(m4){return z.Doc().createElement(m4);},CreateSvgElement:function(m5){return z.Doc().createElementNS("http://www.w3.org/2000/svg",m5);},CreateText:function(m6){return z.Doc().createTextNode(m6);},Doc:$.Field(function(){return G;}),InsertAt:function(m7,m8,m9){var m_,m$,na;if(m9.parentNode===m7){m$=m9.nextSibling;na=[m8,n.Equals(m$,null)?{$:0}:{$:1,$0:m$}];m_=na[0].$==1?na[1].$==1?na[0].$0===na[1].$0:false:na[1].$==0?true:false;}else{m_=false;}return!m_?m8.$==1?void m7.insertBefore(m9,m8.$0):void m7.appendChild(m9):null;},RemoveAttr:function(nb,nc){return nb.removeAttribute(nc);},RemoveClass:function(nd,ne){Q(nd).removeClass(ne);},RemoveNode:function(nf,ng){return ng.parentNode===nf?void nf.removeChild(ng):null;},SetAttr:function(nh,ni,nj){return nh.setAttribute(ni,nj);},SetProperty:function($target,$name,$value){var $0=this,$this=this;return $target.setProperty($name,$value);},SetStyle:function(nk,nl,nm){return z.SetProperty(nk.style,nl,nm);}},DoubleInterpolation:$.Class({Interpolate:function(nn,no,np){return no+nn*(np-no);}}),Easing:$.Class({},{Custom:function(nq){return $.New(X,{TransformTime:nq});},get_CubicInOut:function(){return Y.CubicInOut();}}),Easings:{CubicInOut:$.Field(function(){return $.New(X,{TransformTime:function(nr){var ns;ns=nr*nr;return 3*ns-2*(ns*nr);}});})},Flow1:$.Class({},{Bind:function(nt,nu){return{Render:function(nv){return function(nw){return(nt.Render.call(null,nv))(function(nx){return(nu(nx).Render.call(null,nv))(nw);});};}};},Define:function(ny){return{Render:function(nz){return function(nA){return U.Set(nz,ny(nA));};}};},Embed:function(nB){var nC;nC=W.Create(H.get_Empty());(nB.Render.call(null,nC))(function(){});return H.EmbedView(nC.get_View());},Map:function(nE,nF){return{Render:function(nG){return function(nH){return(nF.Render.call(null,nG))(function(nI){return nH(nE(nI));});};}};},Return:function(nJ){return{Render:function(){return function(nL){return nL(nJ);};}};},Static:function(nM){return{Render:function(nN){return function(nO){U.Set(nN,nM);return nO(null);};}};},get_Do:function(){return Z.New();}}),FlowBuilder:$.Class({Bind:function(nP,nQ){return _0.Bind(nP,nQ);},Return:function(nR){return _0.Return(nR);},ReturnFrom:function(nS){return nS;}},{New:function(){return $.New(this,{});}}),Html:{attr:$.Class({},{New:function(){return $.New(this,{});}})},Input:{ActivateButtonListener:$.Field(function(){var nT,nX;nT=function(nU,nV){var nW;nW=nU.button;return nW===0?U.Set(_1.MouseBtnSt1().Left,nV):nW===1?U.Set(_1.MouseBtnSt1().Middle,nV):nW===2?U.Set(_1.MouseBtnSt1().Right,nV):null;};if(!_1.MouseBtnSt1().Active){_1.MouseBtnSt1().Active=true;G.addEventListener("mousedown",function(nY){return nT(nY,true);},false);nX=G.addEventListener("mouseup",function(nZ){return nT(nZ,false);},false);}else{nX=null;}return nX;}),ActivateKeyListener:$.Field(function(){var n0;if(!_1.KeyListenerState().KeyListenerActive){Q(G).keydown(function(n1){var n2,n3;n2=n1.which;U.Set(_1.KeyListenerState().LastPressed,n2);n3=U.Get(_1.KeyListenerState().KeysPressed);return!c.exists(function(n4){return n4===n2;},n3)?U.Set(_1.KeyListenerState().KeysPressed,C.append(n3,C.ofArray([n2]))):null;});n0=void Q(G).keyup(function(n5){var n6,n7,n9;n6=n5.which;n7=function(n8){return n8!==n6;};n9=function(n_){return C.filter(n7,n_);};return U.Update(_1.KeyListenerState().KeysPressed,n9);});}else{n0=null;}return n0;}),KeyListenerState:$.Field(function(){return{KeysPressed:W.Create($.New(P,{$:0})),KeyListenerActive:false,LastPressed:W.Create(-1)};}),Keyboard:$.Class({},{IsPressed:function(n$){var oa;_1.ActivateKeyListener();oa=function(ob){return ob===n$;};return w.Map(function(oc){return c.exists(oa,oc);},_1.KeyListenerState().KeysPressed.get_View());},get_KeysPressed:function(){_1.ActivateKeyListener();return _1.KeyListenerState().KeysPressed.get_View();},get_LastPressed:function(){_1.ActivateKeyListener();return _1.KeyListenerState().LastPressed.get_View();}}),Mouse:$.Class({},{get_LeftPressed:function(){_1.ActivateButtonListener();return _1.MouseBtnSt1().Left.get_View();},get_MiddlePressed:function(){_1.ActivateButtonListener();return _1.MouseBtnSt1().Middle.get_View();},get_MousePressed:function(){_1.ActivateButtonListener();return F.Apply(F.Apply(F.Apply(F.Const(function(od){return function(oe){return function(of){return(od?true:oe)?true:of;};};}),_1.MouseBtnSt1().Left.get_View()),_1.MouseBtnSt1().Middle.get_View()),_1.MouseBtnSt1().Right.get_View());},get_Position:function(){var og;og=function(oh){return U.Set(_1.MousePosSt1().PosV,[oh.clientX,oh.clientY]);};if(!_1.MousePosSt1().Active){G.addEventListener("mousemove",og,false);_1.MousePosSt1().Active=true;}return _1.MousePosSt1().PosV.get_View();},get_RightPressed:function(){_1.ActivateButtonListener();return _1.MouseBtnSt1().Right.get_View();}}),MouseBtnSt1:$.Field(function(){return{Active:false,Left:W.Create(false),Middle:W.Create(false),Right:W.Create(false)};}),MousePosSt1:$.Field(function(){return{Active:false,PosV:W.Create([0,0])};})},Interpolation1:$.Class({},{get_Double:function(){return $.New(_2,{$:0});}}),Key:$.Class({},{Fresh:function(){return $.New(_3,{$:0,$0:h.Int()});}}),ListModel:$.Class({Add:function(oi){var oj,ol=this;oj=U.Get(this.Var);if(!_4.Contains(this.key,oi,oj)){oj.push(oi);return U.Set(this.Var,oj);}else{d.set(oj,d.findINdex(function(ok){return n.Equals(ol.key.call(null,ok),ol.key.call(null,oi));},oj),oi);return U.Set(ol.Var,oj);}},Clear:function(){return U.Set(this.Var,[]);},ContainsKey:function(om){var oo=this;return c.exists(function(on){return n.Equals(oo.key.call(null,on),om);},U.Get(oo.Var));},ContainsKeyAsView:function(op){var oq,os=this;oq=function(or){return n.Equals(os.key.call(null,or),op);};return w.Map(function(ot){return c.exists(oq,ot);},os.Var.get_View());},Find:function(ou){return d.find(ou,U.Get(this.Var));},FindAsView:function(ov){return w.Map(function(ow){return d.find(ov,ow);},this.Var.get_View());},FindByKey:function(ox){var oz=this;return d.find(function(oy){return n.Equals(oz.key.call(null,oy),ox);},U.Get(oz.Var));},FindByKeyAsView:function(oA){var oB,oD=this;oB=function(oC){return n.Equals(oD.key.call(null,oC),oA);};return w.Map(function(oE){return d.find(oB,oE);},oD.Var.get_View());},Iter:function(oF){return d.iter(oF,U.Get(this.Var));},Lens:function(oG){return _5.New(this,oG,function(oH){return oH;},function(){return function(oJ){return oJ;};});},Remove:function(oK){var oL,oM,oN;oL=U.Get(this.Var);if(_4.Contains(this.key,oK,oL)){oM=this.key;oN=oM(oK);return U.Set(this.Var,d.filter(function(oO){return!n.Equals(oM(oO),oN);},oL));}else{return null;}},RemoveBy:function(oP){return U.Set(this.Var,d.filter(function(oQ){return!oP(oQ);},U.Get(this.Var)));},RemoveByKey:function(oR){var oT=this;return U.Set(this.Var,d.filter(function(oS){return!n.Equals(oT.key.call(null,oS),oR);},U.Get(oT.Var)));},Set:function(oU){return U.Set(this.Var,d.ofSeq(oU));},TryFind:function(oV){return d.tryFind(oV,U.Get(this.Var));},TryFindAsView:function(oW){return w.Map(function(oX){return d.tryFind(oW,oX);},this.Var.get_View());},TryFindByKey:function(oY){var o0=this;return d.tryFind(function(oZ){return n.Equals(o0.key.call(null,oZ),oY);},U.Get(o0.Var));},TryFindByKeyAsView:function(o1){var o2,o4=this;o2=function(o3){return n.Equals(o4.key.call(null,o3),o1);};return w.Map(function(o5){return d.tryFind(o2,o5);},o4.Var.get_View());},UpdateAll:function(o6){return U.Update(this.Var,function(o7){d.iteri(function(o8){return function(o9){return v.iter(function(o_){return d.set(o7,o8,o_);},o6(o9));};},o7);return o7;});},UpdateBy:function(o$,pa){var pb,pc,pe=this,pf,pg;pb=U.Get(this.Var);pc=d.tryFindIndex(function(pd){return n.Equals(pe.key.call(null,pd),pa);},pb);if(pc.$==1){pf=pc.$0;pg=o$(d.get(pb,pf));if(pg.$==1){d.set(pb,pf,pg.$0);return U.Set(pe.Var,pb);}else{return null;}}else{return null;}},get_Key:function(){return this.key;},get_Length:function(){return d.length(U.Get(this.Var));},get_LengthAsView:function(){return w.Map(function(ph){return d.length(ph);},this.Var.get_View());},get_View:function(){return this.view;}},{Create:function(pi,pj){var pk;pk=W.Create(c.toArray(J.distinctBy(pi,pj)));return $.New(_6,{key:pi,Var:pk,view:w.Map(function(pl){return pl.slice();},pk.get_View())});},FromSeq:function(pm){return _6.Create(function(pn){return pn;},pm);}}),ListModel1:$.Class({},{Key:function(po){return po.key;},View:function(pp){return pp.view;}}),ListModels:{Contains:function(pq,pr,ps){var pt;pt=pq(pr);return c.exists(function(pu){return n.Equals(pq(pu),pt);},ps);}},Model:$.Class({get_View:function(){return _7.View(this);}}),Model1:$.Class({},{Create:function(pv,pw){var px;px=W.Create(pw);return $.New(_8,{$:0,$0:px,$1:w.Map(pv,px.get_View())});},Update:function(py,pz){return U.Update(pz.$0,function(pA){py(pA);return pA;});},View:function(pB){return pB.$1;}}),RefImpl:$.Class({Get:function(){return this.get.call(null,this.baseRef.Get());},Set:function(pC){var pE=this;return this.baseRef.Update(function(pD){return(pE.update.call(null,pD))(pC);});},Update:function(pF){var pH=this;return this.baseRef.Update(function(pG){return(pH.update.call(null,pG))(pF(pH.get.call(null,pG)));});},UpdateMaybe:function(pI){var pK=this;return this.baseRef.UpdateMaybe(function(pJ){return v.map(pK.update.call(null,pJ),pI(pK.get.call(null,pJ)));});},get_Id:function(){return this.id;},get_View:function(){return w.Map(this.get,this.baseRef.get_View());}},{New:function(pL,pM,pN){var pO;pO=$.New(this,{});pO.baseRef=pL;pO.get=pM;pO.update=pN;pO.id=h.Id();return pO;}}),RefImpl1:$.Class({Get:function(){return this.get.call(null,this.m.FindByKey(this.key));},Set:function(pP){var pR=this;return this.m.UpdateBy(function(pQ){return{$:1,$0:(pR.update.call(null,pQ))(pP)};},pR.key);},Update:function(pS){var pU=this;return this.m.UpdateBy(function(pT){return{$:1,$0:(pU.update.call(null,pT))(pS(pU.get.call(null,pT)))};},pU.key);},UpdateMaybe:function(pV){var pX=this;return this.m.UpdateBy(function(pW){return v.map(pX.update.call(null,pW),pV(pX.get.call(null,pW)));},pX.key);},get_Id:function(){return this.id;},get_View:function(){return w.Map(this.get,this.m.FindByKeyAsView(this.key));}},{New:function(pY,pZ,p0,p1){var p2;p2=$.New(this,{});p2.m=pY;p2.key=pZ;p2.get=p0;p2.update=p1;p2.id=h.Id();return p2;}}),Route:{Append:function(p3,p4){return{$:0,$0:p.Append(p3.$0,p4.$0)};},FromList:function(p5){return{$:0,$0:p.FromArray(d.ofSeq(p5))};},MakeHash:function(p6){return _9.concat("/",d.map(function(p7){return _(p7);},p.ToArray(p6.$0)));},NoHash:function(p8){return _9.StartsWith(p8,"#")?p8.substring(1):p8;},ParseHash:function(p9){return{$:0,$0:p.FromArray(d.map(function(p_){return ba(p_);},_9.SplitChars(bb.NoHash(p9),[47],1)))};},SameHash:function(p$,qa){return bb.NoHash(p$)===bb.NoHash(qa);},ToList:function(qb){return C.ofArray(p.ToArray(qb.$0));}},RouteMap:$.Class({},{Create:function(qc,qd){return{Des:qd,Ser:qc};}}),RouteMap1:$.Class({},{Install:function(qe){return bc.InstallMap(qe);}}),Router1:$.Class({},{Dir:function(qf,qg){return bd.Prefix(qf,bd.Merge(qg));},Install:function(qh,qi){return bc.Install(qh,qi);},Merge:function(qj){return bc.MergeRouters(qj);},Prefix:function(qk,ql){return{$:0,$0:ql.$0,$1:be.Prefix(qk,ql.$1)};},Route:function(qm,qn,qo){return bc.DefineRoute(qm,qn,qo);}}),Routing:{ComputeBodies:function(qp){var qq;qq=bf.New12();d.iter(function(qr){return qq.set_Item(qr.RouteId,qr);},be.ToArray(qp));return qq;},DefineRoute:function(qs,qt,qu){var qv,qw,qx,qy;qv=W.Create(qt);qw=h.Int();qx=(qu({$:0,$0:qw}))(qv);qy=be.Leaf({$:0,$0:qw,$1:function(qz){F.Sink(function(qA){return qz.UpdateRoute.call(null,bc.DoLink(qs,qA));},qv.get_View());return{OnRouteChanged:function(qB){return U.Set(qv,bc.DoRoute(qs,qB));},OnSelect:function(){return qz.UpdateRoute.call(null,bc.DoLink(qs,U.Get(qv)));},RouteId:qw,RouteValue:qx};}});return{$:0,$0:{$:1,$0:qx},$1:qy};},DoLink:function(qD,qE){return bb.FromList(qD.Ser.call(null,qE));},DoRoute:function(qF,qG){return qF.Des.call(null,bb.ToList(qG));},Install:function(qH,qI){var qJ,qK,qL,qO,qP,qU,qW,qX,qY,q0;qJ=qI.$0;qK=qI.$1;qL=bc.InstallMap({Des:function(qM){return bb.FromList(qM);},Ser:function(qN){return bb.ToList(qN);}});qO={Bodies:g.U(),CurrentRoute:qL,CurrentSite:0,Selection:g.U()};qP=be.Map(function(qQ){return function(qR){var qS;qS=qR.$0;return qR.$1.call(null,{UpdateRoute:function(qT){return bc.OnInternalSiteUpdate(qO,qS,qQ,qT);}});};},qK);qO.Bodies=bc.ComputeBodies(qP);qU=function(qV){return be.Lookup(qP,bb.ToList(qV));};qW=qU(U.Get(qL));if(qW.$==0){qY=qW.$0;qO.CurrentSite=qY.RouteId;qX=W.Create(qY.RouteValue);}else{qX=W.Create(qJ.$==1?qJ.$0:O.FailWith("Site.Install fails on empty site"));}qO.Selection=qX;F.Sink(function(qZ){return bc.OnSelectSite(qO,qH(qZ));},qX.get_View());q0=function(q1){var q2;q2=qU(q1);return q2.$==1?null:bc.OnGlobalRouteChange(qO,q2.$0,bb.FromList(q2.$1));};q0(U.Get(qL));F.Sink(q0,qL.get_View());return qX;},InstallMap:function(q3){var q4,q6,q7;q4=function(){return q3.Des.call(null,bb.ToList(bb.ParseHash(bg.location.hash)));};q6=W.Create(q4(null));q7=function(){var q9;q9=q4(null);return!n.Equals(q3.Ser.call(null,U.Get(q6)),q3.Ser.call(null,q9))?U.Set(q6,q9):null;};bg.onpopstate=q7;bg.onhashchange=q7;F.Sink(function(q_){var q$;q$=bb.MakeHash(bb.FromList(q3.Ser.call(null,q_)));return!bb.SameHash(bg.location.hash,q$)?void(bg.location.hash=q$):null;},q6.get_View());return q6;},MergeRouters:function(ra){var rb,rc,re;rb=c.toArray(ra);rc=be.Merge(c.map(function(rd){return rd.$1;},rb));re=c.tryPick(function(rf){return rf.$0;},rb);return rc.$==1?{$:0,$0:re,$1:rc.$0}:O.FailWith("Invalid Site.Merge: need more prefix disambiguation");},OnGlobalRouteChange:function(rg,rh,ri){if(rg.CurrentSite!==rh.RouteId){rg.CurrentSite=rh.RouteId;U.Set(rg.Selection,rh.RouteValue);}return rh.OnRouteChanged.call(null,ri);},OnInternalSiteUpdate:function(rj,rk,rl,rm){return rj.CurrentSite===rk?bc.SetCurrentRoute(rj,bb.Append(bb.FromList(rl),rm)):null;},OnSelectSite:function(rn,ro){var rp;rp=ro.$0;if(rn.CurrentSite!==rp){rn.CurrentSite=rp;return rn.Bodies.get_Item(rp).OnSelect.call(null,null);}else{return null;}},SetCurrentRoute:function(rq,rr){return!n.Equals(U.Get(rq.CurrentRoute),rr)?U.Set(rq.CurrentRoute,rr):null;}},Snap1:{Bind:function(rs,rt){var ru,rv;ru=bh.Create();rv=function(){return bh.MarkObsolete(ru);};bh.When(rt,function(rx){var ry;ry=rs(rx);return bh.When(ry,function(rz){return(bh.IsForever(ry)?bh.IsForever(rt):false)?bh.MarkForever(ru,rz):bh.MarkReady(ru,rz);},rv);},rv);return ru;},Create:function(){return bh.Make({$:3,$0:[],$1:[]});},CreateForever:function(rA){return bh.Make({$:0,$0:rA});},CreateWithValue:function(rB){return bh.Make({$:2,$0:rB,$1:[]});},IsForever:function(rC){return rC.State.$==0?true:false;},IsObsolete:function(rD){return rD.State.$==1?true:false;},Make:function(rE){return{State:rE};},Map:function(rF,rG){var rH,rI;rH=rG.State;if(rH.$==0){return bh.CreateForever(rF(rH.$0));}else{rI=bh.Create();bh.When(rG,function(rJ){return bh.MarkDone(rI,rG,rF(rJ));},function(){return bh.MarkObsolete(rI);});return rI;}},Map2:function(rL,rM,rN){var rO,rP,rQ,rS,rT,rU,rV,rX;rO=[rM.State,rN.State];if(rO[0].$==0){if(rO[1].$==0){rP=rO[1].$0;return bh.CreateForever((rL(rO[0].$0))(rP));}else{return bh.Map(rL(rO[0].$0),rN);}}else{if(rO[1].$==0){rQ=rO[1].$0;return bh.Map(function(rR){return(rL(rR))(rQ);},rM);}else{rS=bh.Create();rT=[{$:0}];rU=[{$:0}];rV=function(){rT[0]={$:0};rU[0]={$:0};return bh.MarkObsolete(rS);};rX=function(){var rZ,r0,r1;rZ=[rT[0],rU[0]];if(rZ[0].$==1){if(rZ[1].$==1){r0=rZ[0].$0;r1=rZ[1].$0;return(bh.IsForever(rM)?bh.IsForever(rN):false)?bh.MarkForever(rS,(rL(r0))(r1)):bh.MarkReady(rS,(rL(r0))(r1));}else{return null;}}else{return null;}};bh.When(rM,function(r2){rT[0]={$:1,$0:r2};return rX(null);},rV);bh.When(rN,function(r3){rU[0]={$:1,$0:r3};return rX(null);},rV);return rS;}}},Map3:function(r4,r5,r6,r7){var r8,r9,r_,r$,sa,sc,sd,sf,si,sj,sl,so,sr,ss,st,su,sv,sx;r8=[r5.State,r6.State,r7.State];if(r8[0].$==0){if(r8[1].$==0){if(r8[2].$==0){r9=r8[1].$0;r_=r8[2].$0;return bh.CreateForever(((r4(r8[0].$0))(r9))(r_));}else{r$=r8[0].$0;sa=r8[1].$0;return bh.Map(function(sb){return((r4(r$))(sa))(sb);},r7);}}else{if(r8[2].$==0){sc=r8[0].$0;sd=r8[2].$0;return bh.Map(function(se){return((r4(sc))(se))(sd);},r6);}else{sf=r8[0].$0;return bh.Map2(function(sg){return function(sh){return((r4(sf))(sg))(sh);};},r6,r7);}}}else{if(r8[1].$==0){if(r8[2].$==0){si=r8[1].$0;sj=r8[2].$0;return bh.Map(function(sk){return((r4(sk))(si))(sj);},r5);}else{sl=r8[1].$0;return bh.Map2(function(sm){return function(sn){return((r4(sm))(sl))(sn);};},r5,r7);}}else{if(r8[2].$==0){so=r8[2].$0;return bh.Map2(function(sp){return function(sq){return((r4(sp))(sq))(so);};},r5,r6);}else{sr=bh.Create();ss=[{$:0}];st=[{$:0}];su=[{$:0}];sv=function(){ss[0]={$:0};st[0]={$:0};su[0]={$:0};return bh.MarkObsolete(sr);};sx=function(){var sz,sA,sB,sC;sz=[ss[0],st[0],su[0]];if(sz[0].$==1){if(sz[1].$==1){if(sz[2].$==1){sA=sz[0].$0;sB=sz[1].$0;sC=sz[2].$0;return((bh.IsForever(r5)?bh.IsForever(r6):false)?bh.IsForever(r7):false)?bh.MarkForever(sr,((r4(sA))(sB))(sC)):bh.MarkReady(sr,((r4(sA))(sB))(sC));}else{return null;}}else{return null;}}else{return null;}};bh.When(r5,function(sD){ss[0]={$:1,$0:sD};return sx(null);},sv);bh.When(r6,function(sE){st[0]={$:1,$0:sE};return sx(null);},sv);bh.When(r7,function(sF){su[0]={$:1,$0:sF};return sx(null);},sv);return sr;}}}},MapAsync:function(sG,sH){var sI;sI=bh.Create();bh.When(sH,function(sJ){return bi.StartTo(sG(sJ),function(sK){return bh.MarkDone(sI,sH,sK);});},function(){return bh.MarkObsolete(sI);});return sI;},MapCached:function(sM,sN,sO){return bh.Map(function(sP){var sQ,sR,sS;sQ=sM[0];if(sQ.$==1){if(n.Equals(sP,sQ.$0[0])){return sQ.$0[1];}else{sR=sN(sP);sM[0]={$:1,$0:[sP,sR]};return sR;}}else{sS=sN(sP);sM[0]={$:1,$0:[sP,sS]};return sS;}},sO);},MarkDone:function(sT,sU,sV){return bh.IsForever(sU)?bh.MarkForever(sT,sV):bh.MarkReady(sT,sV);},MarkForever:function(sW,sX){var sY,sZ;sY=sW.State;if(sY.$==3){sZ=sY.$0;sW.State={$:0,$0:sX};return l.Iter(function(s0){return s0(sX);},sZ);}else{return null;}},MarkObsolete:function(s1){var s2,s3,s5;s2=s1.State;if(s2.$==1){return null;}else{if(s2.$==2){s3=s2.$1;s1.State={$:1};return l.Iter(function(s4){return s4(null);},s3);}else{if(s2.$==3){s5=s2.$1;s1.State={$:1};return l.Iter(function(s6){return s6(null);},s5);}else{return null;}}}},MarkReady:function(s7,s8){var s9,s_;s9=s7.State;if(s9.$==3){s_=s9.$0;s7.State={$:2,$0:s8,$1:s9.$1};return l.Iter(function(s$){return s$(s8);},s_);}else{return null;}},SnapshotOn:function(ta,tb){var tc,td,te,tf,tg;tc=[ta.State,tb.State];if(tc[1].$==0){return bh.CreateForever(tc[1].$0);}else{td=bh.Create();te=[{$:0}];tf=[false];tg=function(){var ti;if(tf[0]){ti=te[0];return ti.$==1?bh.IsForever(tb)?bh.MarkForever(td,ti.$0):ti.$==1?bh.MarkReady(td,ti.$0):null:ti.$==1?bh.MarkReady(td,ti.$0):null;}else{return null;}};bh.When(ta,function(){tf[0]=true;return tg(null);},function(){te[0]={$:0};return bh.MarkObsolete(td);});bh.When(tb,function(tl){te[0]={$:1,$0:tl};return tg(null);},function(){});return td;}},When:function(tn,to,tp){var tq,tr,ts;tq=tn.State;if(tq.$==1){return tp(null);}else{if(tq.$==2){tr=tq.$0;l.Add(tp,tq.$1);return to(tr);}else{if(tq.$==3){ts=tq.$1;l.Add(to,tq.$0);return l.Add(tp,ts);}else{return to(tq.$0);}}}}},String:{isBlank:function(tt){return _9.forall(function(tu){return bj.IsWhiteSpace(tu);},tt);}},Submitter:$.Class({Trigger:function(){return U.Set(this["var"],null);},get_Input:function(){return this.input;},get_View:function(){return this.view;}},{Create:function(tv,tw){return bk.New(tv,tw);},Input:function(tx){return tx.get_Input();},New:function(ty,tz){var tA,tB;tA=$.New(this,{});tA.input=ty;tA["var"]=W.Create(null);tB=tA.input;tA.view=w.SnapshotOn(tz,tA["var"].get_View(),tB);return tA;},Trigger:function(tC){return tC.Trigger();},View:function(tD){return tD.get_View();}}),Trans:$.Class({},{AnimateChange:function(tE,tF,tG){return(tE.TChange.call(null,tF))(tG);},AnimateEnter:function(tH,tI){return tH.TEnter.call(null,tI);},AnimateExit:function(tJ,tK){return tJ.TExit.call(null,tK);},CanAnimateChange:function(tL){return(tL.TFlags&1)!==0;},CanAnimateEnter:function(tM){return(tM.TFlags&2)!==0;},CanAnimateExit:function(tN){return(tN.TFlags&4)!==0;},Trivial:function(){return{TChange:function(){return function(tP){return o.Const(tP);};},TEnter:function(tQ){return o.Const(tQ);},TExit:function(tR){return o.Const(tR);},TFlags:0};}}),Trans1:$.Class({},{Change:function(tS,tT){return{TChange:tS,TEnter:tT.TEnter,TExit:tT.TExit,TFlags:tT.TFlags|1};},Create:function(tU){return{TChange:tU,TEnter:function(tV){return o.Const(tV);},TExit:function(tW){return o.Const(tW);},TFlags:1};},Enter:function(tX,tY){return{TChange:tY.TChange,TEnter:tX,TExit:tY.TExit,TFlags:tY.TFlags|2};},Exit:function(tZ,t0){return{TChange:t0.TChange,TEnter:t0.TEnter,TExit:tZ,TFlags:t0.TFlags|4};}}),Trie1:{AllSome:function(t1){var t2,t3,t4,t5;t2=bl.Get(t1);t3=bn.New2();t4=true;while(t4?t2.MoveNext():false){t5=t2.get_Current();if(t5.$==1){t3.Add(t5.$0);}else{t4=false;}}return t4?{$:1,$0:t3.ToArray()}:{$:0};},Empty:function(){return{$:1};},IsLeaf:function(t6){return t6.$==2?true:false;},Leaf:function(t7){return{$:2,$0:t7};},Look:function(t8,t9){var t_,t$,ua;t_=[t9,t8];if(t_[0].$==2){return{$:0,$0:t_[0].$0,$1:t8};}else{if(t_[0].$==0){if(t_[1].$==1){t$=t_[1].$1;ua=bo.TryFind(t_[1].$0,t_[0].$0);return ua.$==0?{$:1}:be.Look(t$,ua.$0);}else{return{$:1};}}else{return{$:1};}}},Lookup:function(ub,uc){return be.Look(c.toList(uc),ub);},Map:function(ud,ue){return be.MapLoop($.New(P,{$:0}),ud,ue);},MapLoop:function(uf,ug,uh){var ui;if(uh.$==1){return{$:1};}else{if(uh.$==2){ui=uh.$0;return{$:2,$0:(ug(uf))(ui)};}else{return be.TrieBranch(bo.Map(function(uj){return function(uk){return be.MapLoop(C.append(uf,C.ofArray([uj])),ug,uk);};},uh.$0));}}},Mapi:function(ul,um){var un;un=[0];return be.Map(function(uo){var up;up=un[0];un[0]=up+1;return(ul(up))(uo);},um);},Merge:function(uq){var ur,us;ur=c.toArray(uq);us=d.length(ur);return us===0?{$:1,$0:{$:1}}:us===1?{$:1,$0:d.get(ur,0)}:c.exists(function(ut){return be.IsLeaf(ut);},ur)?{$:0}:v.map(function(uu){return be.TrieBranch(uu);},be.MergeMaps(function(uv){return be.Merge(uv);},c.choose(function(uw){return uw.$==0?{$:1,$0:uw.$0}:{$:0};},ur)));},MergeMaps:function(ux,uy){var uz;uz=c.collect(function(uA){return bo.ToSeq(uA);},uy);return v.map(function(uB){return bo.OfArray(c.toArray(uB));},be.AllSome(c.map(function(uC){var uD;uD=uC[0];return v.map(function(uE){return[uD,uE];},ux(uC[1]));},bo.ToSeq(c.fold(function(uF){return function(uG){return be.MultiAdd(uG[0],uG[1],uF);};},bp.New1([]),uz)))));},MultiAdd:function(uH,uI,uJ){return uJ.Add(uH,$.New(P,{$:1,$0:uI,$1:be.MultiFind(uH,uJ)}));},MultiFind:function(uK,uL){return O.DefaultArg(bo.TryFind(uK,uL),$.New(P,{$:0}));},Prefix:function(uM,uN){return be.TrieBranch(bp.New1(C.ofArray([[uM,uN]])));},ToArray:function(uO){var uP;uP=[];be.Map(function(){return function(uR){return l.Add(uR,uP);};},uO);return l.ToArray(uP);},TrieBranch:function(uS){return uS.get_IsEmpty()?{$:1}:{$:0,$0:uS};}},Var:$.Class({Get:function(){return U.Get(this);},Set:function(uT){return U.Set(this,uT);},Update:function(uU){return U.Update(this,uU);},UpdateMaybe:function(uV){var uW;uW=uV(U.Get(this));return uW.$==1?U.Set(this,uW.$0):null;},get_Id:function(){return"uinref"+$$.String(U.GetId(this));},get_View:function(){var uY=this;return{$:0,$0:function(){return U.Observe(uY);}};},get_View1:function(){return this.get_View();}},{Create:function(uZ){return $.New(W,{Const:false,Current:uZ,Snap:bh.CreateWithValue(uZ),Id:h.Int()});}}),Var1:$.Class({},{Get:function(u0){return u0.Current;},GetId:function(u1){return u1.Id;},Lens:function(u2,u3,u4){return bq.New(u2,u3,u4);},Observe:function(u5){return u5.Snap;},Set:function(u6,u7){if(u6.Const){return null;}else{bh.MarkObsolete(u6.Snap);u6.Current=u7;u6.Snap=bh.CreateWithValue(u7);return;}},SetFinal:function(u8,u9){if(u8.Const){return null;}else{u8.Const=true;u8.Current=u9;u8.Snap=bh.CreateForever(u9);return;}},Update:function(u_,u$){return U.Set(u_,u$(U.Get(u_)));}}),View:$.Class({},{Convert:function(va,vb){return w.ConvertBy(function(vc){return vc;},va,vb);},ConvertBy:function(vd,ve,vf){var vg;vg=[bf.New12()];return w.Map(function(vh){var vi,vj,vk;vi=vg[0];vj=bf.New12();vk=d.map(function(vl){var vm,vn;vm=vd(vl);vn=vi.ContainsKey(vm)?vi.get_Item(vm):ve(vl);vj.set_Item(vm,vn);return vn;},c.toArray(vh));vg[0]=vj;return vk;},vf);},ConvertSeq:function(vo,vp){return w.ConvertSeqBy(function(vq){return vq;},function(){return function(vs){return vo(vs);};},vp);},ConvertSeqBy:function(vt,vu,vv){var vw;vw=[bf.New12()];return w.Map(function(vx){var vy,vz,vA;vy=vw[0];vz=bf.New12();vA=d.map(function(vB){var vC,vD,vE;vC=vt(vB);if(vy.ContainsKey(vC)){vE=vy.get_Item(vC);U.Set(vE.NVar,vB);vD=vE;}else{vD=w.ConvertSeqNode(function(vF){return(vu(vC))(vF);},vB);}vz.set_Item(vC,vD);return vD.NValue;},c.toArray(vx));vw[0]=vz;return vA;},vv);},ConvertSeqNode:function(vG,vH){var vI,vJ;vI=W.Create(vH);vJ=vI.get_View();return{NValue:vG(vJ),NVar:vI,NView:vJ};},CreateLazy:function(vK){var vL;vL=[{$:0}];return{$:0,$0:function(){var vN,vO,vP;vN=vL[0];if(vN.$==1){if(!bh.IsObsolete(vN.$0)){return vN.$0;}else{vO=vK(null);vL[0]={$:1,$0:vO};return vO;}}else{vP=vK(null);vL[0]={$:1,$0:vP};return vP;}}};},CreateLazy2:function(vQ,vR,vS){var vT,vU;vT=vR.$0;vU=vS.$0;return w.CreateLazy(function(){var vW,vX;vW=vT(null);vX=vU(null);return(vQ(vW))(vX);});},Join:function(vY){var vZ;vZ=vY.$0;return w.CreateLazy(function(){return bh.Bind(function(v1){return v1.$0.call(null,null);},vZ(null));});},Map:function(v2,v3){var v4;v4=v3.$0;return w.CreateLazy(function(){return bh.Map(v2,v4(null));});},Map2:function(v6,v7,v8){return w.CreateLazy2(function(v9){return function(v_){return bh.Map2(v6,v9,v_);};},v7,v8);},MapAsync:function(v$,wa){var wb;wb=wa.$0;return w.CreateLazy(function(){return bh.MapAsync(v$,wb(null));});},MapCached:function(wd,we){var wf,wg;wf=we.$0;wg=[{$:0}];return w.CreateLazy(function(){return bh.MapCached(wg,wd,wf(null));});},SnapshotOn:function(wi,wj,wk){var wl,wm,wn,wo;wl=wj.$0;wm=wk.$0;wn=bh.CreateWithValue(wi);wo=[false];return w.CreateLazy(function(){var wq,wr;wq=wl(null);wr=wm(null);if(wo[0]){return bh.SnapshotOn(wq,wr);}else{bh.When(bh.SnapshotOn(wq,wr),function(){return null;},function(){if(!wo[0]){wo[0]=true;return bh.MarkObsolete(wn);}else{return null;}});return wn;}});},UpdateWhile:function(wu,wv,ww){var wx;wx=[wu];return w.Map2(function(wy){return function(wz){if(wy){wx[0]=wz;}return wx[0];};},wv,ww);},get_Do:function(){return{$:0};}}),View1:$.Class({},{Apply:function(wA,wB){return w.Map2(function(wC){return function(wD){return wC(wD);};},wA,wB);},Bind:function(wE,wF){return w.Join(w.Map(wE,wF));},Const:function(wG){var wH;wH=bh.CreateForever(wG);return{$:0,$0:function(){return wH;}};},Sink:function(wJ,wK){var wL,wM;wL=wK.$0;wM=function(){return bh.When(wL(null),wJ,function(){return bi.Schedule(wM);});};return bi.Schedule(wM);}})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Concurrency);b=$.Safe($$.Array);c=$.Safe($$.WebSharper.Seq);d=$.Safe($$.WebSharper.Arrays);e=$.Safe($$.WebSharper.UI);f=$.Safe(e.Next);g=$.Safe(f.Abbrev);h=$.Safe(g.Fresh);i=$.Safe($$.WebSharper.Collections);j=$.Safe(i.HashSetProxy);k=$.Safe(g.HashSet);l=$.Safe(g.JQueue);m=$.Safe(g.Slot1);n=$.Safe($$.WebSharper.Unchecked);o=$.Safe(f.An);p=$.Safe(f.AppendList1);q=$.Safe(f.Anims);r=$.Safe($$.requestAnimationFrame);s=$.Safe($$.WebSharper.Lazy);t=$.Safe(f.Array);u=$.Safe(f.Trans);v=$.Safe($$.WebSharper.Option);w=$.Safe(f.View);x=$.Safe(f.Client);y=$.Safe(x.Attrs);z=$.Safe(f.DomUtility);A=$.Safe(x.Attr);B=$.Safe(x.AttrProxy);C=$.Safe($$.WebSharper.List);D=$.Safe(x.AnimatedAttrNode);E=$.Safe(x.DynamicAttrNode);F=$.Safe(f.View1);G=$.Safe($$.document);H=$.Safe(x.Doc);I=$.Safe(x.Elt);J=$.Safe($$.Seq);K=$.Safe(x.Docs);L=$.Safe(f.String);M=$.Safe(x.CheckedInput);N=$.Safe(g.Mailbox);O=$.Safe($$.WebSharper.Operators);P=$.Safe(C.T);Q=$.Safe($$.jQuery);R=$.Safe(K.NodeSet);S=$.Safe(x.DocElemNode);T=$.Safe(K.DomNodes);U=$.Safe(f.Var1);V=$.Safe($$.RegExp);W=$.Safe(f.Var);X=$.Safe(f.Easing);Y=$.Safe(f.Easings);Z=$.Safe(f.FlowBuilder);_0=$.Safe(f.Flow1);_1=$.Safe(f.Input);_2=$.Safe(f.DoubleInterpolation);_3=$.Safe(f.Key);_4=$.Safe(f.ListModels);_5=$.Safe(f.RefImpl1);_6=$.Safe(f.ListModel);_7=$.Safe(f.Model1);_8=$.Safe(f.Model);_9=$.Safe($$.WebSharper.Strings);_=$.Safe($$.encodeURIComponent);ba=$.Safe($$.decodeURIComponent);bb=$.Safe(f.Route);bc=$.Safe(f.Routing);bd=$.Safe(f.Router1);be=$.Safe(f.Trie1);bf=$.Safe(i.Dictionary);bg=$.Safe($$.window);bh=$.Safe(f.Snap1);bi=$.Safe(g.Async);bj=$.Safe($$.WebSharper.Char);bk=$.Safe(f.Submitter);bl=$.Safe($$.WebSharper.Enumerator);bm=$.Safe(i.ResizeArray);bn=$.Safe(bm.ResizeArrayProxy);bo=$.Safe(i.MapModule);bp=$.Safe(i.FSharpMap);return bq=$.Safe(f.RefImpl);});$.OnLoad(function(){$.Inherit(I,H);_1.MousePosSt1();_1.MouseBtnSt1();_1.KeyListenerState();_1.ActivateKeyListener();_1.ActivateButtonListener();Y.CubicInOut();z.Doc();y.EmptyAttr();A.ValidateForm();h.counter();return;});}());
